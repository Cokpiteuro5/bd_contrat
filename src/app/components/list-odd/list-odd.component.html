<main id="main" class="main">
  <div class="pagetitle">
    <h1>Objectifs De DÃ©veloppement Durable</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
        <li class="breadcrumb-item">Tables</li>
        <li class="breadcrumb-item active">ODD</li>
      </ol>
      <div class=" mY-3 mb-4">
        <button class="custom-button mx-2 " (click)="toggleCard()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);transform: ;msFilter:;"><path d="M17 17h-1.559l-9.7-10.673A1 1 0 0 0 5.001 6H2v2h2.559l4.09 4.5-4.09 4.501H2v2h3.001a1 1 0 0 0 .74-.327L10 13.987l4.259 4.686a1 1 0 0 0 .74.327H17v3l5-4-5-4v3z"></path><path d="M15.441 8H17v3l5-3.938L17 3v3h-2.001a1 1 0 0 0-.74.327l-3.368 3.707 1.48 1.346L15.441 8z"></path></svg>
          CALCULER ECART
        </button>
        <button class="custom-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);transform: ;msFilter:;"><path d="M17 17h-1.559l-9.7-10.673A1 1 0 0 0 5.001 6H2v2h2.559l4.09 4.5-4.09 4.501H2v2h3.001a1 1 0 0 0 .74-.327L10 13.987l4.259 4.686a1 1 0 0 0 .74.327H17v3l5-4-5-4v3z"></path><path d="M15.441 8H17v3l5-3.938L17 3v3h-2.001a1 1 0 0 0-.74.327l-3.368 3.707 1.48 1.346L15.441 8z"></path></svg>
          RE
        </button>
      </div>

    </nav>
  </div>
  <section class="section">
    <div class="row">
      <div class="col-lg-12">
        <div class="card" >
          <div class="card-body" *ngIf="showFirstCard">
            <div class="row">

              <div class="col-md-2 mt-3 mb-3">
                <select class="form-select form-select-sm" [(ngModel)]="itemsPerPage"
                  (ngModelChange)="onItemsPerPageChange()">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>

              <div class="col-sm-10 col-md-10 text-end mt-3 mb-3">

                <div class="dt-buttons btn-group flex-wrap">

                  <button class="btn  buttons-excel buttons-html5  me-2" type="button" data-bs-toggle="modal"
                    data-bs-target="#verticalycentered">
                    <span><img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOtJREFUSEvtlLENwjAQRV8KVqBBQkIU0NBTsQJbwAI0bAAjwCAMQEUNBR0CKRUrUIAO2VJ0EPucKF3cWHbu/rt/SS6j4ZU1rE8qYOEK2lsLSwFMgaMTngEnC8QK6AIXQHZZT2Di9iDHAui4ysVBcYkDcfIKESyAHeB7r7XkXSzrAor5b3ewFPYNNQc64dqAObABxsq2L0QD/NmHX4EVcPAX2kEO9P701AqQ1BswLAPEWpD8XDtIFlBuf/JbgP4earcoNt9aQKxDRFv0APpRmXDAHRiU/ckyi7bAqCLkDKxDs6iibnla6rhOLuADaREyGWG4OkIAAAAASUVORK5CYII=" /></span>
                  </button>
                  <button class="btn  buttons-pdf buttons-html5 me-2" aria-controls="example1" type="button"
                    data-bs-toggle="tooltip" data-bs-placement="top">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                      style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
                      <path d="m12 16 4-5h-3V4h-2v7H8z"></path>
                      <path d="M20 18H4v-7H2v7c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2v-7h-2v7z"></path>
                    </svg> </button>
                  <button class="btn  buttons-print " routerLink="/add-odd" routerLinkActive="router-link-active"
                    tabindex="0" aria-controls="example1" type="button" data-bs-toggle="tooltip"
                    data-bs-placement="top">
                    <span><img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAMJJREFUSEvdlE0KwkAMRl/PIQjShb2Nl3HjDfRCPYib7oqC91AqDgxpyc+0peBsJ/le8mUmFSufamV9NMAJuAJNsIgOOAPtkKcBXsAuKJ7Ce6C2AO9C8ZT2LV7rYFNAKkwrYlYHRYBUjTsZCHVgAaw/I2EjizYH5K/WbWPettXBfwE8nzw8ZI/oyEZtBk9gH1X9xT+Ag9xFcsjDur4BxyDkDlym1rUEBHWnwzWLFgeUeq6ukPyy1HM3YBFLpIi1IWdDPx8jLBkZXJ+qAAAAAElFTkSuQmCC" /></span>
                  </button>


                </div>
              </div>
            </div>

            <div class="loading-overlay" *ngIf="loading" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-body">
                    <div class="text-center">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <p>Loading...</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <table class="table table-hover ">
              <thead class="table-primary">
                <tr>
                  <th scope="col">Code</th>
                  <th scope="col">ODD</th>
                  <th scope="col">Sources De Financement</th>
                  <th scope="col">Besoins De Financement</th>
                  <!-- <th scope="col" class="text-center">Action</th> -->
                </tr>
              </thead>
              <tbody *ngIf="filteredOdds || !loading">
                <tr *ngFor="let odd of odds | paginate: { itemsPerPage: itemsPerPage, currentPage: p} | filter: search">
                  <td>{{ odd.code_odd }}</td>
                  <td>{{ odd.label }}</td>
                  <td>{{ odd.scr_finance}}</td>

                  <td>
                    <div class="row">
                      <div class="col-md-10">
                        <input type="number" [(ngModel)]="odd.bs_finance" (blur)="updateOddAndEcart(odd)" class="form-control">
                      </div>
                      <div class="col-md-2 me-4">
                        <button class="btn " data-bs-toggle="tooltip" data-bs-placement="top" title="Update" (click)="updateOddAndEcart(odd)" >
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check2-square" viewBox="0 0 16 16">
                            <path d="M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"/>
                            <path d="m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"/>
                          </svg>
                        </button>
                      </div>
                    </div>
                  </td>

                </tr>
              </tbody>
            </table>

            <div class="pagination-container ">
              <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </div>

          </div>
          <div class="card-body" *ngIf="!showFirstCard">

            <div class="row">

              <div class="col-md-2 mt-3 mb-3">
                <select class="form-select form-select-sm" [(ngModel)]="itemsPerPage"
                  (ngModelChange)="onItemsPerPageChange()">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>


              <div class="col-sm-10 col-md-10 text-end mt-3 mb-3">

                <div class="dt-buttons btn-group flex-wrap">

                  <button class="btn  buttons-excel buttons-html5  me-2" type="button" data-bs-toggle="modal"
                    data-bs-target="#verticalycentered">
                    <span><img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAOtJREFUSEvtlLENwjAQRV8KVqBBQkIU0NBTsQJbwAI0bAAjwCAMQEUNBR0CKRUrUIAO2VJ0EPucKF3cWHbu/rt/SS6j4ZU1rE8qYOEK2lsLSwFMgaMTngEnC8QK6AIXQHZZT2Di9iDHAui4ysVBcYkDcfIKESyAHeB7r7XkXSzrAor5b3ewFPYNNQc64dqAObABxsq2L0QD/NmHX4EVcPAX2kEO9P701AqQ1BswLAPEWpD8XDtIFlBuf/JbgP4earcoNt9aQKxDRFv0APpRmXDAHRiU/ckyi7bAqCLkDKxDs6iibnla6rhOLuADaREyGWG4OkIAAAAASUVORK5CYII=" /></span>
                  </button>
                  <button class="btn  buttons-pdf buttons-html5 me-2" aria-controls="example1" type="button"
                    data-bs-toggle="tooltip" data-bs-placement="top">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                      style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
                      <path d="m12 16 4-5h-3V4h-2v7H8z"></path>
                      <path d="M20 18H4v-7H2v7c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2v-7h-2v7z"></path>
                    </svg> </button>
                  <button class="btn  buttons-print " routerLink="/add-odd" routerLinkActive="router-link-active"
                    tabindex="0" aria-controls="example1" type="button" data-bs-toggle="tooltip"
                    data-bs-placement="top">
                    <span><img
                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAMJJREFUSEvdlE0KwkAMRl/PIQjShb2Nl3HjDfRCPYib7oqC91AqDgxpyc+0peBsJ/le8mUmFSufamV9NMAJuAJNsIgOOAPtkKcBXsAuKJ7Ce6C2AO9C8ZT2LV7rYFNAKkwrYlYHRYBUjTsZCHVgAaw/I2EjizYH5K/WbWPettXBfwE8nzw8ZI/oyEZtBk9gH1X9xT+Ag9xFcsjDur4BxyDkDlym1rUEBHWnwzWLFgeUeq6ukPyy1HM3YBFLpIi1IWdDPx8jLBkZXJ+qAAAAAElFTkSuQmCC" /></span>
                  </button>


                </div>
              </div>
            </div>

            <!-- <div class="loading-overlay" *ngIf="loading" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-body">
                    <div class="text-center">
                      <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <p>Loading...</p>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->

            <table class="table table-hover ">
              <thead class="table-primary">
                <tr>
                  <th scope="col">Code</th>
                  <th scope="col">ODD</th>
                  <th scope="col">Sources De Financement</th>
                  <th scope="col">Besoins De Financement</th>
                  <th scope="col">Ecart</th>
                </tr>
              </thead>
              <tbody *ngIf="filteredOdds || !loading">
                <tr *ngFor="let odd of odds | paginate: { itemsPerPage: itemsPerPage, currentPage: p} | filter: search">
                  <td>{{ odd.code_odd }}</td>
                  <td>{{ odd.label }}</td>
                  <td>{{ odd.scr_finance }}</td>
                  <td>{{ odd.bs_finance }}</td>
                  <td class="text-center">{{ odd.ecart }}</td>

                </tr>
              </tbody>
            </table>

            <div class="pagination-container ">
              <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </div>

          </div>

        </div>
      </div>
    </div>
  </section>
</main>
